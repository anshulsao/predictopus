YCustom.later(10,window,function(){YCustom.use('node','io','json-parse',function(Y){var SAVE_PREF_URL='/predictnow/_xhr/save';var templates={'nosel':'You have not made any predictions','winOnly':'You have predicted that {{{teamW}}} will win. You can predict the goals as well','halfTime':'You have predicted that {{{teamW}}} will win and the half time score will be {{hScore}}.','fullTime':'You have predicted that {{{teamW}}} will win and the full time score will be {{fScore}}.','all':'You have predicted that {{{teamW}}} will win, half time score will be {{hScore}} and the full time score will be {{fScore}}. Press confirm to save','draw':'You have predicted that this match will be a draw with score {{dScore}}'};var submit=Y.one('#pn-submit');var hScore1Ele=Y.one('#hScore1');var hScore2Ele=Y.one('#hScore2');var fScore1Ele=Y.one('#fScore1');var fScore2Ele=Y.one('#fScore2');var errorDiv=Y.one('#pn-errorDiv');var infoDiv=Y.one('#pn-infoDiv');var gameid=submit.getAttribute('data-gameid');submit.on('click',function(){var hScore1=hScore1Ele.get('value');var hScore2=hScore2Ele.get('value');var fScore1=fScore1Ele.get('value');var fScore2=fScore2Ele.get('value');var hScore=hScore1+" - "+hScore2;var fScore=fScore1+" - "+fScore2;var winningELe=Y.one('input[name=winner]:checked');if(validate(hScore1,hScore2,fScore1,fScore2,winningELe)){var teamW=winningELe.getAttribute('data-val');var result=winningELe.getAttribute('data-id');var template=templates['all'];var data={'hScore':hScore,'fScore':fScore,'teamW':teamW};var html=Mustache.render(template,data);var cfg={method:'POST',data:{hScore1:hScore1,hScore2:hScore2,fScore1:fScore1,fScore2:fScore2,result:result,gameid:gameid},on:{success:function(){infoDiv.setHTML(html);infoDiv.removeClass('hidden');}}};Y.io(SAVE_PREF_URL,cfg);}});function validate(hScore1,hScore2,fScore1,fScore2,winningELe){var error=false;if(!winningELe){error='You need to select the match result to predict.';}
if(fScore1<hScore1||fScore2<hScore2){error='Full time score cannot be less than half time score.';}
if(error){errorDiv.setHTML(error);errorDiv.removeClass('hidden');return false;}
errorDiv.addClass('hidden');return true;}});});
